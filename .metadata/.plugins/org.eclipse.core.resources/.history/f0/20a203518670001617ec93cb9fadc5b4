package twy.burton.core;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.List;

import twy.burton.core.library.PasswordLibrary;
import twy.burton.utilities.FileAccess;

public class PasswordManager {

	private List<PasswordLibrary> libraries;
	private PasswordLibrary activeLibrary;
	
	
	public PasswordManager(){
		
	}
	
	
	public void writeLibrariesFile(){
		
		try {
			
			File librariesFile = new File( Constants.LIBRARIES_FILE );
			FileOutputStream out = new FileOutputStream( librariesFile );
			
			// Write number of libraries to file
			byte[] numberLibraries = FileAccess.int_to_bb_le( libraries.size() );
			out.write(numberLibraries);
			
			for( int i = 0 ; i < libraries.size(); i++ ){
				// Get the string representation of the library
				byte[] store = libraries.get(i).getLibraryStoreString().getBytes();
				// Write size of data to file
				out.write( FileAccess.int_to_bb_le(store.length) );
				// Write data to file
				out.write( store );
			}
			
			out.close();
			
		} catch ( IOException e) {
			e.printStackTrace();
		}
		
	}
	
	public boolean readLibrariesFile(){
		
		try {
			
			File librariesFile = new File( Constants.LIBRARIES_FILE );
			FileInputStream in = new FileInputStream( librariesFile );
			
			byte[] numberLibrariesBytes = new byte[4];
			in.read(numberLibrariesBytes, 0, 4);
			int numberLibraries = FileAccess.bb_to_int_le(numberLibrariesBytes);
			
			for( int i = 0 ; i < numberLibraries ; i++ ){
				
			}
			
		} catch ( IOException e) {
			e.printStackTrace();
		}
		
		
		return false;
	}
	
}
